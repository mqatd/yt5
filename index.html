<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>YouTube Audio Player</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background: linear-gradient(145deg, #0f0f0f, #1e1e1e);
      color: #f1f1f1;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 15px;
    }
    .player {
      background: #2a2a2a;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.4);
      width: 100%;
      max-width: 420px;
      text-align: center;
    }
    .song-title {
      font-size: 1.1rem;
      font-weight: bold;
      margin-bottom: 18px;
      line-height: 1.4;
    }
    .controls {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 15px 0;
      flex-wrap: wrap;
    }
    button {
      background: #1877F2;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      cursor: pointer;
      color: white;
      font-size: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: background 0.2s ease, transform 0.1s ease;
    }
    button:hover {
      background: #145dbf;
      transform: scale(1.05);
    }
    input[type="range"] {
      -webkit-appearance: none;
      width: 100%;
      height: 5px;
      background: #444;
      border-radius: 3px;
      outline: none;
      cursor: pointer;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 14px;
      height: 14px;
      background: #1877F2;
      border-radius: 50%;
      cursor: pointer;
    }
    #time {
      margin-top: 10px;
      font-size: 0.9rem;
      color: #ccc;
    }
    #ytplayer {
      width: 0;
      height: 0;
      overflow: hidden;
      position: absolute;
      top: -9999px;
      left: -9999px;
    }
    .playlist {
      margin-top: 20px;
      text-align: left;
      max-height: 200px;
      overflow-y: auto;
      border-top: 1px solid #444;
      padding-top: 10px;
    }
    .playlist div {
      padding: 6px 10px;
      cursor: pointer;
      border-radius: 6px;
      margin-bottom: 4px;
      background: #333;
      transition: background 0.2s;
    }
    .playlist div:hover {
      background: #444;
    }
    .playlist .active {
      background: #1877F2;
      font-weight: bold;
      color: white;
    }
  </style>
</head>
<body>
  <div class="player">
    <div class="song-title" id="song-title">Song 1</div>
    <div class="controls">
      <button onclick="prevSong()"><i class="fa-solid fa-backward"></i></button>
      <button onclick="playVideo()"><i class="fa-solid fa-play"></i></button>
      <button onclick="pauseVideo()"><i class="fa-solid fa-pause"></i></button>
      <button onclick="stopVideo()"><i class="fa-solid fa-stop"></i></button>
      <button onclick="nextSong()"><i class="fa-solid fa-forward"></i></button>
    </div>
    
    <!-- Seekbar -->
    <input type="range" id="seekbar" min="0" max="100" value="0" step="0.1" />
    <div id="time">0:00 / 0:00</div>

    <!-- Playlist -->
    <div class="playlist" id="playlist"></div>
  </div>
  
  <div id="ytplayer"></div>
  
  <script>
    let player, duration = 0, seeking = false;

    // 10 unique song slots (replace IDs later)
    const playlist = [
      { id: "f4LFnh8alyk", title: "Song 1 - Maayunnallo" },
      { id: "f4LFnh8alyk", title: "Song 2 - Maayunnallo" },
      { id: "f4LFnh8alyk", title: "Song 3 - Maayunnallo" },
      { id: "f4LFnh8alyk", title: "Song 4 - Maayunnallo" },
      { id: "f4LFnh8alyk", title: "Song 5 - Maayunnallo" },
      { id: "f4LFnh8alyk", title: "Song 6 - Maayunnallo" },
      { id: "f4LFnh8alyk", title: "Song 7 - Maayunnallo" },
      { id: "f4LFnh8alyk", title: "Song 8 - Maayunnallo" },
      { id: "f4LFnh8alyk", title: "Song 9 - Maayunnallo" },
      { id: "f4LFnh8alyk", title: "Song 10 - Maayunnallo" }
    ];

    let currentIndex = 0;

    function onYouTubeIframeAPIReady() {
      renderPlaylist();
      loadSong(currentIndex);
    }

    function loadSong(index) {
      if (player) {
        player.destroy();
      }
      player = new YT.Player('ytplayer', {
        videoId: playlist[index].id,
        playerVars: { autoplay: 1, controls: 0, modestbranding: 1 },
        events: { 
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange
        }
      });
      document.getElementById("song-title").innerText = playlist[index].title;
      highlightActiveSong();
    }

    function onPlayerReady() {
      duration = player.getDuration();
      document.getElementById("seekbar").max = duration;
      updateSeekbar();
    }

    function onPlayerStateChange(event) {
      if (event.data === YT.PlayerState.ENDED) {
        nextSong(); // Auto play next
      }
    }

    function playVideo() { player && player.playVideo(); }
    function pauseVideo() { player && player.pauseVideo(); }
    function stopVideo() { if (player) { player.pauseVideo(); player.seekTo(0, true); } }
    function prevSong() { currentIndex = (currentIndex - 1 + playlist.length) % playlist.length; loadSong(currentIndex); }
    function nextSong() { currentIndex = (currentIndex + 1) % playlist.length; loadSong(currentIndex); }

    function updateSeekbar() {
      if (player && player.getCurrentTime) {
        if (!seeking) {
          let current = player.getCurrentTime();
          document.getElementById("seekbar").value = current;
          document.getElementById("time").innerText =
            formatTime(current) + " / " + formatTime(duration);
        }
      }
      requestAnimationFrame(updateSeekbar);
    }

    document.getElementById("seekbar").addEventListener("input", () => seeking = true);
    document.getElementById("seekbar").addEventListener("change", function () {
      player.seekTo(this.value, true); seeking = false;
    });

    function formatTime(sec) {
      sec = Math.floor(sec);
      let m = Math.floor(sec / 60);
      let s = sec % 60;
      return m + ":" + (s < 10 ? "0" + s : s);
    }

    function renderPlaylist() {
      const container = document.getElementById("playlist");
      container.innerHTML = "";
      playlist.forEach((song, i) => {
        const div = document.createElement("div");
        div.innerText = song.title;
        div.onclick = () => { currentIndex = i; loadSong(i); };
        container.appendChild(div);
      });
      highlightActiveSong();
    }

    function highlightActiveSong() {
      const items = document.querySelectorAll("#playlist div");
      items.forEach((item, i) => {
        item.classList.toggle("active", i === currentIndex);
      });
    }

    const tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.body.appendChild(tag);
  </script>
</body>
</html>

